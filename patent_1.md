### 发明创造名称
    一种页面投放实时流量获取技术

### 现有技术的技术方案

    Google Analytics/百度统计：功能复杂，数据精度不可控，无法长时间保留历史数据且难以于现有系统进行集成，而且这些工具都是和用户私有账号绑定，权限控制比较困难。

### 现有技术的缺点及本提案需要解决的问题
  现有技术的缺点:    

1. 无法进行单个页面的url分发到多个城市
2. 无法长时间保存投放页面的数据
3. 无法和现有系统集成
4. 与私有账号绑定，权限控制困难


基于上述情况，本方案致力于解决如下问题：

1. 能够将总的url分到成不同的url到不同的城市中，便于精确化流量统计。
2. 流量数据记录在业务数据库中，可以灵活的设置访问时间。
3. 可以与业务数据集成，便于权限控制。

本提案的技术方案的详细阐述

总体思路：
R&D同学开发一个通用页面，此页面能够根据传入的cityid信息或者从ip/cookies中拿到城市id，组装为一个新的页面，不同城市打开的通用页面，对应的跳转页面url会不同， 每个城市的url会不同。

用redis中使用hashmap 记录每个url的在指定的时间片中累计的pv数量以及dpid/guid的个数，用于计算uv,
每次进入页面，pv增加1，使用hashmap的 value类型为set类型，用于存储uv






